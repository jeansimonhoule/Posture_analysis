<Widget>:
    font_name:'RobotoMono-Regular'

<ScrollView>:
    canvas.after:
        Color:
            rgba: [0,0,1] + [self.bar_color[3] * 1 if self.do_scroll_y else 0]
        Rectangle:
            pos: self.right - (self.bar_width*3) - self.bar_margin, self.y + self.height * self.vbar[0]
            size: self.bar_width*3, self.height * self.vbar[1]
        Color:
            rgba: [0,0,1] + [self.bar_color[3] * 0 if self.do_scroll_x else 0]
        Rectangle:
            pos: self.x + self.width * self.hbar[0], self.y + self.bar_margin
            size: self.width * self.hbar[1], self.bar_width


WindowManager:
    id: sm
    MainWindow:
        id: main
    AnalyseWindow:
        id: analyse
        main:main
        sm:sm
    ResultWindow:
        id: result
        analyse: analyse
    MesureWindow:
        id: mesure
    ReferenceWindow:
        id: reference
    

<MainWindow>:
    name: "main"
    imagee: "image-analyse"

    GridLayout: 
        
        cols:1
        size:root.width,root.height

        
        GridLayout:
            cols:2
            row_default_height:50
            row_force_default:True
            size_hint_y:None
            height:self.minimum_height
            padding:0,10,0,0
    
            canvas.before:
                Color:
                    rgba: 0.05,0.25,0.5,1
                Rectangle:
                    size: self.size
                    pos: self.pos
            
            Image:
                id: logo
                source:'1488492636-basicman09_81758.png'
                size_hint:(None,None)
                width:0.1*(root.width)
                height:0.1*(root.height)

            Button:
                id: posturamaxima
                #canvas.before:
                    #Color:
                     #   rgba: 1, 1, 1, 1
                    #Line:
                     #   width: 1
                      #  rectangle: self.x, self.y, self.width, self.height
                
                markup:True
                background_color: 0.1,0.3,0.4,0
                pos_hint:{"x":0,"top":1}
                size_hint: (None,None)
                font_size: (root.width**2 + root.height**2) / 14**4
                text: "[b]Postura maxima[/b]"
                text_size: self.size
                halign: "left"
                padding_x: 20
                width:0.9*(root.width)
                height:0.1*(root.height)
                on_release: background_color = (1,1,1,1)
                

            
        GridLayout:
            cols:2
            spacing:10,10
            padding:10,30,50,10
            canvas.before:
                Color:
                    rgba: 0.36,0.75,1,0.7
                Rectangle:
                    size: self.size
                    pos: self.pos
            

            Image:
                id: image-analyse
                source:'pexels-photomix-company-95916.jpg'
                

            Button:
                background_color: 0,0,0,0
                font_size: (root.width**2 + root.height**2) / 15**4
                text: "Analyser"
                canvas.before:
                    Color:
                        rgba: (0,0.5,0,0.8) if self.state=='normal' else (0,.8,.7,1)  # visual feedback of press
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [50,]
                on_release:
                    root.manager.transition.direction = "left"
                    app.root.current = 'analyse'

                    
            Image:
                id: image-mesure
                source:'pexels-pixabay-53404.jpg'
            

            Button:
                background_color: 0,0,0,0
                font_size: (root.width**2 + root.height**2) / 15**4
                text: "Mesurer"
                canvas.before:
                    Color:
                        rgba: (0.7,0.1,0.2,0.9) if self.state=='normal' else (0,.8,.7,1)  # visual feedback of press
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [50,]
                on_release:
                    root.manager.transition.direction = "left"
                    app.root.current = 'mesure'

            Image:
                id: image-reference
                source:'pexels-david-bartus-690779.jpg'
                

            Button:
                background_color: 0,0,0,0
                font_size: (root.width**2 + root.height**2) / 15**4
                text: "Reference"
                canvas.before:
                    Color:
                        rgba: (0.5,0.5,0.5,1)  if self.state=='normal' else (0,.8,.7,1)  # visual feedback of press
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [50,]
                on_release:
                    root.manager.transition.direction = "left"
                    app.root.current = 'reference'

          
                

<AnalyseWindow>:
    name: "analyse"
    #firstchoice : firstchoice.__self__
    #secondchoice : secondchoice.__self__
    confirmDate: confirmDate.__self__
    #dropdown: dropdown.__self__
    btnSession:btnSession.__self__
    

    on_pre_enter:
        root.get_possible_file()

    GridLayout:
        id:grid-main-analyse
        cols:1
        size:root.width,root.height

        GridLayout:
            cols:2
            row_default_height:50
            row_force_default:True
            size_hint_y:None
            height:self.minimum_height
            padding:0,10,0,0
    
            canvas.before:
                Color:
                    rgba: 0.05,0.25,0.5,1
                Rectangle:
                    size: self.size
                    pos: self.pos
            
            Image:
                id: logo
                source:'1488492636-basicman09_81758.png'
                size_hint:(None,None)
                width:0.1*(root.width)
                height:0.1*(root.height)

            Button:
                id: posturamaxima
                #canvas.before:
                    #Color:
                     #   rgba: 1, 1, 1, 1
                    #Line:
                     #   width: 1
                      #  rectangle: self.x, self.y, self.width, self.height
                
                markup:True
                background_color: 0.1,0.3,0.4,0
                pos_hint:{"x":0,"top":1}
                size_hint: (None,None)
                font_size: (root.width**2 + root.height**2) / 14**4
                text: "[b]Postura maxima-> Analysis[/b]"
                text_size: self.size
                halign: "left"
                padding_x: 20
                width:0.9*(root.width)
                height:0.1*(root.height)
            

        GridLayout:
            id: grid-date
            cols:3
            padding:40,70,40,20
            row_default_height:50
            row_force_default:True
            size_hint_y:None
            height:self.minimum_height
            
            Label:
                text: "Insert date in the format (AAAA_MM_DD): "
                text_size: self.size
                pos_hint:{"x":0}
                valign:"center"
            
            TextInput:
                id: confirmDate
                multiline: False
                size_hint:(None,None)
                width:0.3*root.width
                height:"50dp"

            Button:
                text:"ok"
                on_release:
                    root.confirm_date_btn()
                

        GridLayout:
            id:grid-session
            cols:2
            padding:40,60,40,60
            row_default_height:50
            row_force_default:True
            size_hint_y:None
            height:self.minimum_height

            Label:
                text: "Select a section: "
                text_size: self.size
                pos_hint:{"x":0}
                valign:"top"

            Button:
                id: btnSession
                text: 'Session'
                #on_parent: dropdown.dismiss()
                size_hint:(None,None)
                height: '50dp'
                width:0.3*root.width
                pos_hint:{"top":1}
                background_color: 0.1,0.3,0.8,1

               
                 
        
        GridLayout:
            id: grid-lancer-Button
            cols:3
            padding:40,40,40,100

            Label:
                text:""

            Button:
                id: lancerBtn
                size_hint:(None,None)
                width:0.5*root.width
                text: "Launch analysis"
                on_release: 
                    app.root.current = "result"
                    root.manager.transition.direction = "up"
                    root.lancer_analyse_btn()
            
            Label:
                text:""

<ResultWindow>:
    name: "result"
    source1: source1
    source2: source2
    btnResult: btnResult
    hourLabel:hourLabel
    resultLabel: resultLabel
    
    GridLayout:
        canvas.before:
            Color:
                rgba: 0.88,0.88,0.88,1
            Rectangle:
                size: self.size
                pos: self.pos
        rows:3

        GridLayout:
            cols:2
            row_default_height:50
            row_force_default:True
            size_hint_y:None
            height:self.minimum_height
            padding:0,10,0,0
    
            canvas.before:
                Color:
                    rgba: 0.05,0.25,0.5,1
                Rectangle:
                    size: self.size
                    pos: self.pos
            
            Image:
                id: logo
                source:'1488492636-basicman09_81758.png'
                size_hint:(None,None)
                width:0.1*(root.width)
                height:0.1*(root.height)

            Button:
                id: posturamaxima
                #canvas.before:
                    #Color:
                     #   rgba: 1, 1, 1, 1
                    #Line:
                     #   width: 1
                      #  rectangle: self.x, self.y, self.width, self.height
                
                markup:True
                background_color: 0.1,0.3,0.4,0
                pos_hint:{"x":0,"top":1}
                size_hint: (None,None)
                font_size: (root.width**2 + root.height**2) / 14**4
                text: "[b]Postura maxima-> Results[/b]"
                text_size: self.size
                halign: "left"
                padding_x: 20
                width:0.9*(root.width)
                height:0.1*(root.height)
                on_release: app.root.current = "main"

                
        GridLayout:
            cols:2
            row_default_height:root.height*4/7
            row_force_default:True
            size_hint_y:None
            height:self.minimum_height

            Image:
                id: source1

            

            FloatLayout:
                Label:
                    id:hourLabel
                    markup:True
                    size_hint:(0.2,0.1)
                    pos_hint:{"x":0.4,"y":0.9}
                    background_color: 0.3,0.3,1,1

                Image:
                    id: source2
                    size_hint:(0.8,0.8)
                    pos_hint:{"x":0.1,"y":0.16}
                    
                Button:
                    id: btnResult
                    text: "Changer d'heure"
                    background_color: 0.1,0.8,0.1,1
                    size_hint:(0.5,0.08)
                    pos_hint:{"x":0.25,"y":0.05}
                    


        GridLayout:
            rows:1

            ScrollView:

                Label:
                    id: resultLabel
                    #text: 2*"[color=3333ff]René Lévesque est un homme d'État québécois né le 24 août 1922 à Campbellton2 au Canada et mort le 1er novembre 1987 à Verdun. D'abord connu comme journaliste, animateur de radio et de télévision, il est un artisan éminent de la Révolution tranquille, de la nationalisation de l'électricité au Québec et un ardent défenseur de la souveraineté politique du Québec. À la tête du Parti québécois, un parti indépendantiste, il est premier ministre du Québec de 1976 à 1985. Durant son mandat il tient le premier référendum sur l'indépendance du Québec du Canada en 1980.[/color]"
                    font_size: 20
                    markup: True
                    size_hint_x: 1.0
                    size_hint_y: None
                    text_size: self.width, None
                    height: self.texture_size[1]
                

            

<MesureWindow>:
    name: "mesure"
    mesureState: mesureState
    
    GridLayout:
        rows:2

        Button:
            text: "Démarrer une session d'analyse"
            on_release: 
                root.mesure_Btn()

        Label: 
            id: mesureState
            text:" "





<ReferenceWindow>:
    name: "reference"
    referenceLabel: referenceLabel
   

    GridLayout: 
        rows:3

        Button:
            text: "Get my reference"
            on_release: 
                background_color = 0,1,0,1
                root.getRef_btn()

        Label: 
            id: referenceLabel
            text: ""



    


    



    